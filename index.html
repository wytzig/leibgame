<!DOCTYPE html>
<html lang="nl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leib Weissman: Multiplayer Cloud Jumper</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="importmap">
        {
            "imports": {
                "three": "https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.module.js"
            }
        }
    </script>
</head>

<body>

    <!-- HUD -->
    <div class="ui-container">
        <div class="flex justify-between p-4 bg-gray-900 bg-opacity-70 text-white rounded-b-lg mx-auto max-w-2xl mt-0">
            <div>
                <span class="text-xs font-semibold uppercase block opacity-70">Speler</span>
                <span id="player-name-display" class="text-yellow-400 font-bold">Gast</span>
                <span class="text-green-400 text-sm mt-1 block">(Online: <span id="peer-count">0</span>)</span>
            </div>
            <div class="text-right">
                <span class="text-xs font-semibold uppercase block opacity-70">Munten</span>
                <span id="coin-display" class="text-2xl font-bold">0</span>
            </div>
        </div>
        <div id="status-msg" class="text-center mt-2 text-white font-bold text-lg drop-shadow-lg"></div>
    </div>

    <!-- Start Scherm -->
    <div id="start-screen" class="overlay active">
        <div class="game-card">
            <h1 class="text-4xl font-bold text-gray-900 mb-2">Leib Weissman</h1>
            <h2 class="text-xl text-indigo-600 mb-6 font-bold">Multiplayer Cloud Jumper</h2>

            <div id="auth-status" class="text-sm p-3 mb-4 bg-blue-100 text-blue-800 rounded-lg">Verbinding maken met
                server...</div>

            <div class="mb-6">
                <label class="block text-left text-gray-700 text-sm font-bold mb-2" for="username">Kies je naam:</label>
                <input
                    class="shadow appearance-none border rounded w-full py-3 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                    id="username-input" type="text" placeholder="Bijv. LeibStrijder" maxlength="12">
            </div>

            <!-- Character Selection -->
            <div id="character-selection" class="mb-6">
                <label class="block text-left text-gray-700 text-sm font-bold mb-2">Kies je karakter:</label>
                <div class="flex gap-4">
                    <!-- Mini 3D previews -->
                    <div class="char-preview border p-2 rounded-md hover:border-indigo-600 transition cursor-pointer"
                        data-model="option2.glb" style="width:120px; height:150px;"></div>
                    <div class="char-preview border p-2 rounded-md hover:border-indigo-600 transition cursor-pointer"
                        data-model="medieval_luuk.glb" style="width:120px; height:150px;"></div>
                    <div class="char-preview border p-2 rounded-md hover:border-indigo-600 transition cursor-pointer"
                        data-model="leib.glb" style="width:120px; height:150px;"></div>
                </div>
            </div>

            <div class="text-left text-sm p-4 bg-gray-100 rounded-lg mb-6">
                <p><strong>Controls:</strong> WASD (Loop) | Spatie (Spring) | Muis (Kijk) | Klik (Spuug)</p>
            </div>

            <button id="start-btn"
                class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-full transition duration-300 w-full text-lg cursor-not-allowed opacity-50"
                disabled>
                Start Spel
            </button>
        </div>
    </div>

    <div id="pause-screen" class="overlay">
        <div class="game-card">
            <h1>PAUZE</h1>
            <button id="resume-btn" class="bg-green-600 text-white px-6 py-3 rounded-full mt-4">Verder</button>
        </div>
    </div>

    <div id="game-over-screen" class="overlay">
        <div class="game-card">
            <h1>GAME OVER</h1>
            <p id="go-reason" class="text-red-600 mb-4"></p>
            <button onclick="window.location.reload();"
                class="bg-red-600 text-white px-6 py-3 rounded-full">Opnieuw</button>
        </div>
    </div>

    <script src="config.js"></script>
    <script type="module" src="main.js"></script>

    <style>
        /* Highlight selected character */
        .char-preview.selected {
            border-color: #00ff00;
            background-color: #222;
        }

        #start-btn {
            position: relative;
            z-index: 9999;
        }
    </style>
    <!-- Buy Me a Coffee knop (zwevend en klikbaar tijdens gameplay) -->
    <a href="https://www.buymeacoffee.com/wytzig" target="_blank" id="bmc-btn" class="bmc-fixed-btn">
        ☕ Steun me
    </a>

    <style>
        /* Buy Me a Coffee stijl */
        .bmc-fixed-btn {
            position: fixed !important;
            bottom: 20px;
            right: 20px;
            background: #ffdd00;
            color: #000;
            padding: 10px 18px;
            border-radius: 40px;
            font-weight: bold;
            text-decoration: none;
            font-size: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);
            z-index: 999999;
            /* staat boven canvas, HUD, overlays */
            pointer-events: auto !important;
            /* muis werkt zelfs bij pointer-lock */
            user-select: none;
            transition: transform 0.15s;
        }

        .bmc-fixed-btn:hover {
            transform: translateY(-2px);
        }
    </style>

    <!-- Mobile Controls -->
    <div id="mobile-controls" class="mobile-controls">
        <div id="mobile-dpad">
            <button class="btn-up">↑</button>
            <button class="btn-left">←</button>
            <button class="btn-down">↓</button>
            <button class="btn-right">→</button>
        </div>
        <div id="mobile-actions">
            <button id="jump-btn">SPRING</button>
            <button id="shoot-btn">SPUUG</button>
            <button id="ability-btn">BUFF</button>
        </div>
    </div>
    <style>
        /* Mobile Controls Styling */
        .mobile-controls {
            display: none;
        }

        #mobile-dpad {
            display: grid;
            grid-template-columns: repeat(3, 60px);
            grid-template-rows: repeat(3, 60px);
            gap: 5px;
            margin-left: 10px;
        }

        #mobile-dpad button {
            width: 60px;
            height: 60px;
            opacity: 0.6;
            font-size: 24px;
            border-radius: 50%;
            border: none;
            background: #222;
            color: #fff;
        }

        #mobile-actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-right: 10px;
        }

        #mobile-actions button {
            width: 80px;
            height: 50px;
            border: none;
            border-radius: 12px;
            background: #444;
            color: #fff;
            font-weight: bold;
            opacity: 0.8;
        }

        @media (max-width: 768px) {

            /* mobiel */
            .mobile-controls {
                display: block;
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                z-index: 1000;
            }
        }
    </style>
</body>

</html>